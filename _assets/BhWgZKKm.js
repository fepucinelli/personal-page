import{_ as M}from"./BsGdwpVh.js";import{_ as P}from"./D_Wu4aqH.js";import{b as T}from"./DujWecmX.js";import{u as I}from"./BFRsLa2i.js";import{u as L,f as D}from"./Byeg02D2.js";import{u as N}from"./C-ZUhEXN.js";import{d as R,w as V,e as d,c as i,b as a,k as t,x as f,F as h,r as q,q as S,o as e,i as E}from"./CvQCRS_V.js";import"./CKN8Y8Ue.js";const $={class:"px-6 py-8 max-w-6xl mx-auto"},j={key:1,class:"text-center py-16"},z={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},n=50,Y=R({__name:"stations",async setup(G){var g;let r,p;const l=T();I({title:"All Stations",description:"Discover radio stations from around the world. Browse and listen to a curated collection of internet radio.",path:"/stations"});const{data:v,pending:w,error:b,refresh:_}=([r,p]=V(()=>L({limit:n,offset:0})),r=await r,p(),r),x=d([...v.value||[]]),y=d(n),u=d((((g=v.value)==null?void 0:g.length)||0)>=n),c=d(!1);async function F(){if(!(c.value||!u.value)){c.value=!0;try{const m=await D({offset:y.value,limit:n});x.value.push(...m),y.value+=n,m.length<n&&(u.value=!1)}finally{c.value=!1}}}const B=E(()=>x.value.slice(-150)),{sentinelRef:C}=N(F);return(m,o)=>{const k=M,A=P;return e(),i("div",$,[o[2]||(o[2]=a("div",{class:"mb-8"},[a("h1",{class:"font-display text-3xl italic text-ink dark:text-neutral-50"}," All Stations "),a("p",{class:"mt-2 text-sm text-ink-muted dark:text-neutral-500"}," Discover radio stations from around the world ")],-1)),t(w)?(e(),f(k,{key:0})):t(b)?(e(),i("div",j,[o[1]||(o[1]=a("p",{class:"text-ink-muted dark:text-neutral-500 text-sm"},"Failed to load stations.",-1)),a("button",{onClick:o[0]||(o[0]=(...s)=>t(_)&&t(_)(...s)),class:"mt-4 text-sm text-brand hover:text-brand-dark transition-colors"}," Try again ")])):(e(),i(h,{key:2},[a("div",z,[(e(!0),i(h,null,q(t(B),s=>(e(),f(A,{key:s.id,station:s,"is-playing":t(l).isPlaying(s),"is-favorite":t(l).isFavorite(s),onPlay:t(l).playStation,onToggleFavorite:t(l).toggleFavorite},null,8,["station","is-playing","is-favorite","onPlay","onToggleFavorite"]))),128))]),t(c)?(e(),f(k,{key:0})):S("",!0),t(u)?(e(),i("div",{key:1,ref_key:"sentinelRef",ref:C,class:"h-1"},null,512)):S("",!0)],64))])}}});export{Y as default};
