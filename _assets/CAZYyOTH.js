import{A as f,C as p,l,q as b}from"./DmDaLEUV.js";const F=f("player",()=>{const t=l(null),s=l(!1),o=l(!1),i=l(1),r=l(null);{const n=localStorage.getItem("player-volume");n!==null&&(i.value=Number(n))}let e=null,a=null;function u(n){a=n}function y(){e||(e=new Audio,e.crossOrigin="anonymous",e.preload="none",e.volume=i.value,e.addEventListener("playing",()=>{s.value=!0,o.value=!1}),e.addEventListener("pause",()=>{s.value=!1}),e.addEventListener("waiting",()=>{o.value=!0}),e.addEventListener("canplay",()=>{o.value=!1}),e.addEventListener("error",()=>{r.value="Station unavailable",o.value=!1,s.value=!1,a==null||a()}))}async function m(n){var d;if(y(),((d=t.value)==null?void 0:d.id)===n.id){c();return}t.value=n,o.value=!0,r.value=null,e.src=n.streamUrl;try{await e.play()}catch{r.value="Unable to play station",o.value=!1,a==null||a()}}function c(){e&&(e.paused?e.play():e.pause())}function g(){e&&e.pause()}function S(n){i.value=n,e&&(e.volume=n),localStorage.setItem("player-volume",String(n))}return{currentStation:t,isPlaying:s,isLoading:o,volume:p(i),error:r,play:m,toggle:c,pause:g,setVolume:S,onError:u}}),v=[{id:"system-radio-8150",name:"Deep Electronic Vibes",streamUrl:"https://az1.sednastream.com/radio/8150/Live",country:"Albany",countryCode:"US",tags:["electronic","deep house"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""},{id:"system-disco-funk",name:"70s 80s Disco Funk ModernSoul Boogie",streamUrl:"https://discofunk.streamingmedia.it/usa",country:"Italy",countryCode:"IT",tags:["disco","funk","soul","boogie"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""},{id:"7ada8a81-5ae1-418c-8f18-51d2f38d86a4",name:"Bossa Jazz Brasil",streamUrl:"https://centova5.transmissaodigital.com:20104/live",country:"Brazil",countryCode:"BR",tags:["bossa nova","jazz","mpb"],bitrate:64,codec:"AAC+",popularity:59,isPlayable:!0,favicon:"https://bossajazzbrasil.com/wp-content/uploads/2020/12/cropped-bjs-app-180x180.png"}];function P(){const t=localStorage.getItem("favorites");if(t)try{return JSON.parse(t)}catch{return[]}return[]}const h=f("favorites",()=>{const t=l(P()),s=b(()=>[...v,...t.value]),o=e=>v.some(a=>a.id===e),i=e=>o(e)?!0:t.value.some(a=>a.id===e);function r(e){o(e.id)||(i(e.id)?t.value=t.value.filter(a=>a.id!==e.id):t.value.push(e),localStorage.setItem("favorites",JSON.stringify(t.value)))}return{stations:p(t),allFavorites:s,isSystemFavorite:o,isFavorite:i,toggleFavorite:r}});function A(){const t=F(),s=h();function o(a){t.play(a)}function i(a){s.toggleFavorite(a)}function r(a){var u;return((u=t.currentStation)==null?void 0:u.id)===a.id&&t.isPlaying}function e(a){return s.isFavorite(a.id)}return{playStation:o,toggleFavorite:i,isPlaying:r,isFavorite:e}}export{F as a,A as b,h as u};
