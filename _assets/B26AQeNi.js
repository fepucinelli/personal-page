import{D as f,E as p,e as l,i as b}from"./CG1ttWnU.js";const F=f("player",()=>{const a=l(null),i=l(!1),o=l(!1),n=l(1),r=l(null);{const s=localStorage.getItem("player-volume");s!==null&&(n.value=Number(s))}let e=null,t=null;function u(s){t=s}function y(){e||(e=new Audio,e.crossOrigin="anonymous",e.preload="none",e.volume=n.value,e.addEventListener("playing",()=>{i.value=!0,o.value=!1}),e.addEventListener("pause",()=>{i.value=!1}),e.addEventListener("waiting",()=>{o.value=!0}),e.addEventListener("canplay",()=>{o.value=!1}),e.addEventListener("error",()=>{r.value="Station unavailable",o.value=!1,i.value=!1,t==null||t()}))}async function m(s){var v;if(y(),((v=a.value)==null?void 0:v.id)===s.id){c();return}a.value=s,o.value=!0,r.value=null,e.src=s.streamUrl;try{await e.play()}catch{r.value="Unable to play station",o.value=!1,t==null||t()}}function c(){e&&(e.paused?e.play():e.pause())}function g(){e&&e.pause()}function S(s){n.value=s,e&&(e.volume=s),localStorage.setItem("player-volume",String(s))}return{currentStation:a,isPlaying:i,isLoading:o,volume:p(n),error:r,play:m,toggle:c,pause:g,setVolume:S,onError:u}}),d=[{id:"system-radio-8150",name:"Deep Electronic Vibes",streamUrl:"https://az1.sednastream.com/radio/8150/Live",country:"Albany",countryCode:"US",tags:["electronic","deep house"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""},{id:"system-disco-funk",name:"70s 80s Disco Funk ModernSoul Boogie",streamUrl:"https://discofunk.streamingmedia.it/usa",country:"Italy",countryCode:"IT",tags:["disco","funk","soul","boogie"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""},{id:"system-bossa-brazil",name:"Bossa Jazz Brasil",streamUrl:"https://centova5.transmissaodigital.com:20104/live",country:"Brazil",countryCode:"BR",tags:["bossa nova","jazz","mpb"],bitrate:64,codec:"AAC+",popularity:59,isPlayable:!0,favicon:"https://bossajazzbrasil.com/wp-content/uploads/2020/12/cropped-bjs-app-180x180.png"}];function z(){const a=localStorage.getItem("favorites");if(a)try{return JSON.parse(a)}catch{return[]}return[]}const P=f("favorites",()=>{const a=l(z()),i=b(()=>[...d,...a.value]),o=e=>d.some(t=>t.id===e),n=e=>o(e)?!0:a.value.some(t=>t.id===e);function r(e){o(e.id)||(n(e.id)?a.value=a.value.filter(t=>t.id!==e.id):a.value.push(e),localStorage.setItem("favorites",JSON.stringify(a.value)))}return{stations:p(a),allFavorites:i,isSystemFavorite:o,isFavorite:n,toggleFavorite:r}});function A(){const a=F(),i=P();function o(t){a.play(t)}function n(t){i.toggleFavorite(t)}function r(t){var u;return((u=a.currentStation)==null?void 0:u.id)===t.id&&a.isPlaying}function e(t){return i.isFavorite(t.id)}return{playStation:o,toggleFavorite:n,isPlaying:r,isFavorite:e}}export{F as a,A as b,P as u};
