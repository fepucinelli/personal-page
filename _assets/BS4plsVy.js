import{L as p,m as l}from"./DPxjnCvZ.js";const m=p("player",()=>{const r=l(null),u=l(!1),a=l(!1),s=l(1),t=l(null);let e=null;function v(){e||(e=new Audio,e.crossOrigin="anonymous",e.preload="none",e.volume=s.value,e.addEventListener("playing",()=>{u.value=!0,a.value=!1}),e.addEventListener("pause",()=>{u.value=!1}),e.addEventListener("waiting",()=>{a.value=!0}),e.addEventListener("canplay",()=>{a.value=!1}),e.addEventListener("error",()=>{t.value="Station unavailable",a.value=!1,u.value=!1}))}async function f(n){var o;if(v(),((o=r.value)==null?void 0:o.id)===n.id){i();return}r.value=n,a.value=!0,t.value=null,e.src=n.streamUrl;try{await e.play()}catch{t.value="Unable to play station",a.value=!1}}function i(){e&&(e.paused?e.play():e.pause())}function d(){e&&e.pause()}function c(n){s.value=n,e&&(e.volume=n)}return{currentStation:r,isPlaying:u,isLoading:a,volume:s,error:t,play:f,toggle:i,pause:d,setVolume:c}});export{m as u};
