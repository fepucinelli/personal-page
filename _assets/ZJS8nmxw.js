import{_ as A}from"./BN_2wKIK.js";import{a as M,_ as P}from"./CxkzWjgt.js";import{u as T}from"./MzLhcaTF.js";import{u as I,f as L}from"./BbwpiMdG.js";import{u as D}from"./BEeTV4nX.js";import{d as N,w as R,m as d,c as i,a as s,h as t,k as f,F as h,r as V,i as S,o as e}from"./DPxjnCvZ.js";import"./BS4plsVy.js";const E={class:"px-6 py-8 max-w-6xl mx-auto"},$={key:1,class:"text-center py-16"},j={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},n=50,U=N({__name:"stations",async setup(q){var y;let r,p;const l=M();T({title:"All Stations",description:"Discover radio stations from around the world. Browse and listen to a curated collection of internet radio.",path:"/stations"});const{data:_,pending:w,error:F,refresh:v}=([r,p]=R(()=>I({limit:n,offset:0})),r=await r,p(),r),g=d([..._.value||[]]),x=d(n),u=d((((y=_.value)==null?void 0:y.length)||0)>=n),c=d(!1);async function b(){if(!(c.value||!u.value)){c.value=!0;try{const m=await L({offset:x.value,limit:n});g.value.push(...m),x.value+=n,m.length<n&&(u.value=!1)}finally{c.value=!1}}}const{sentinelRef:B}=D(b);return(m,o)=>{const k=A,C=P;return e(),i("div",E,[o[2]||(o[2]=s("div",{class:"mb-8"},[s("h1",{class:"font-display text-3xl italic text-ink dark:text-neutral-50"}," All Stations "),s("p",{class:"mt-2 text-sm text-ink-muted dark:text-neutral-500"}," Discover radio stations from around the world ")],-1)),t(w)?(e(),f(k,{key:0})):t(F)?(e(),i("div",$,[o[1]||(o[1]=s("p",{class:"text-ink-muted dark:text-neutral-500 text-sm"},"Failed to load stations.",-1)),s("button",{onClick:o[0]||(o[0]=(...a)=>t(v)&&t(v)(...a)),class:"mt-4 text-sm text-brand hover:text-brand-dark transition-colors"}," Try again ")])):(e(),i(h,{key:2},[s("div",j,[(e(!0),i(h,null,V(t(g),a=>(e(),f(C,{key:a.id,station:a,"is-playing":t(l).isPlaying(a),"is-favorite":t(l).isFavorite(a),onPlay:t(l).playStation,onToggleFavorite:t(l).toggleFavorite},null,8,["station","is-playing","is-favorite","onPlay","onToggleFavorite"]))),128))]),t(c)?(e(),f(k,{key:0})):S("",!0),t(u)?(e(),i("div",{key:1,ref_key:"sentinelRef",ref:B,class:"h-1"},null,512)):S("",!0)],64))])}}});export{U as default};
