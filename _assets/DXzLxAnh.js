import{y as H,z as y,A as M,v as U,B as F,s as L,C as p,q as S,m as z,D as w,E as G,G as $,h as I,H as q,I as x,J,K as W,o as Q,c as X,a as g}from"./Ryta_xWQ.js";const Y={trailing:!0};function Z(a,e=25,r={}){if(r={...Y,...r},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let c,t,u=[],s,D;const _=(v,i)=>(s=K(a,v,i),s.finally(()=>{if(s=null,r.trailing&&D&&!t){const h=_(v,D);return D=null,h}}),s);return function(...v){return s?(r.trailing&&(D=v),s):new Promise(i=>{const h=!t&&r.leading;clearTimeout(t),t=setTimeout(()=>{t=null;const o=r.leading?c:_(this,v);for(const m of u)m(o);u=[]},e),h?(c=_(this,v),i(c)):u.push(i)})}}async function K(a,e,r){return await a.apply(e,r)}const k=Symbol.for("nuxt:client-only"),A=a=>a==="defer"||a===!1;function la(...a){var m;const e=typeof a[a.length-1]=="string"?a.pop():void 0;aa(a[0],a[1])&&a.unshift(e);let[r,c,t={}]=a;const u=S(()=>W(r));if(typeof u.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const s=H();t.server??(t.server=!0),t.default??(t.default=ta),t.getCachedData??(t.getCachedData=N),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=y.deep),t.dedupe??(t.dedupe="cancel"),t._functionName,s._asyncData[u.value];const D={cause:"initial",dedupe:t.dedupe};(m=s._asyncData[u.value])!=null&&m._init||(D.cachedData=t.getCachedData(u.value,s,{cause:"initial"}),s._asyncData[u.value]=O(s,u.value,c,t,D.cachedData));const _=s._asyncData[u.value];_._deps++;const v=()=>s._asyncData[u.value].execute(D),i=t.server!==!1&&s.payload.serverRendered;{let n=function(d){const f=s._asyncData[d];f!=null&&f._deps&&(f._deps--,f._deps===0&&(f==null||f._off()))};const l=x();if(l&&i&&t.immediate&&!l.sp&&(l.sp=[]),l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const d=l._nuxtOnBeforeMountCbs;M(()=>{d.forEach(f=>{f()}),d.splice(0,d.length)}),U(()=>d.splice(0,d.length))}const P=l&&(l._nuxtClientOnly||F(k,!1));i&&s.isHydrating&&(_.error.value||_.data.value!=null)?(_.pending.value=!1,_.status.value=_.error.value?"error":"success"):l&&(!P&&s.payload.serverRendered&&s.isHydrating||t.lazy)&&t.immediate?l._nuxtOnBeforeMountCbs.push(v):t.immediate&&v();const V=J(),j=L([u,...t.watch||[]],([d],[f])=>{var E,B;if((d||f)&&d!==f){const T=((E=s._asyncData[f])==null?void 0:E.data.value)!==y.value;f&&n(f);const C={cause:"initial",dedupe:t.dedupe};(B=s._asyncData[d])!=null&&B._init||(C.cachedData=t.getCachedData(d,s,{cause:"initial"}),s._asyncData[d]=O(s,d,c,t,C.cachedData)),s._asyncData[d]._deps++,(t.immediate||T)&&s._asyncData[d].execute(C)}else _._execute({cause:"watch",dedupe:t.dedupe})},{flush:"sync"});V&&p(()=>{j(),n(u.value)})}const h={data:b(()=>{var n;return(n=s._asyncData[u.value])==null?void 0:n.data}),pending:b(()=>{var n;return(n=s._asyncData[u.value])==null?void 0:n.pending}),status:b(()=>{var n;return(n=s._asyncData[u.value])==null?void 0:n.status}),error:b(()=>{var n;return(n=s._asyncData[u.value])==null?void 0:n.error}),refresh:(...n)=>s._asyncData[u.value].execute(...n),execute:(...n)=>s._asyncData[u.value].execute(...n),clear:()=>R(s,u.value)},o=Promise.resolve(s._asyncDataPromises[u.value]).then(()=>h);return Object.assign(o,h),o}function b(a){return S({get(){var e;return(e=a())==null?void 0:e.value},set(e){const r=a();r&&(r.value=e)}})}function aa(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function R(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=y.errorValue),a._asyncData[e]&&(a._asyncData[e].data.value=void 0,a._asyncData[e].error.value=y.errorValue,a._asyncData[e].pending.value=!1,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function ea(a,e){const r={};for(const c of e)r[c]=a[c];return r}function O(a,e,r,c,t){var h;(h=a.payload._errors)[e]??(h[e]=y.errorValue);const u=c.getCachedData!==N,s=r,D=c.deep?z:w,_=t!=null,v=a.hook("app:data:refresh",async o=>{(!o||o.includes(e))&&await i.execute({cause:"refresh:hook"})}),i={data:D(_?t:c.default()),pending:w(!_),error:q(a.payload._errors,e),status:w("idle"),execute:(o={})=>{if(a._asyncDataPromises[e]){if(A(o.dedupe??c.dedupe))return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}if(o.cause==="initial"||a.isHydrating){const n="cachedData"in o?o.cachedData:c.getCachedData(e,a,{cause:o.cause??"refresh:manual"});if(n!=null)return a.payload.data[e]=i.data.value=n,i.error.value=y.errorValue,i.status.value="success",Promise.resolve(n)}i.pending.value=!0,i.status.value="pending";const m=new Promise((n,l)=>{try{n(s(a))}catch(P){l(P)}}).then(async n=>{if(m.cancelled)return a._asyncDataPromises[e];let l=n;c.transform&&(l=await c.transform(n)),c.pick&&(l=ea(l,c.pick)),a.payload.data[e]=l,i.data.value=l,i.error.value=y.errorValue,i.status.value="success"}).catch(n=>{if(m.cancelled)return a._asyncDataPromises[e];i.error.value=$(n),i.data.value=I(c.default()),i.status.value="error"}).finally(()=>{m.cancelled||(i.pending.value=!1,delete a._asyncDataPromises[e])});return a._asyncDataPromises[e]=m,a._asyncDataPromises[e]},_execute:Z((...o)=>i.execute(...o),0,{leading:!0}),_default:c.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var o;v(),(o=a._asyncData[e])!=null&&o._init&&(a._asyncData[e]._init=!1),u||G(()=>{var m;(m=a._asyncData[e])!=null&&m._init||(R(a,e),i.execute=()=>Promise.resolve(),i.data.value=y.value)})}};return i}const ta=()=>y.value,N=(a,e,r)=>{if(e.isHydrating)return e.payload.data[a];if(r.cause!=="refresh:manual"&&r.cause!=="refresh:hook")return e.static.data[a]},sa=(a,e)=>{const r=a.__vccOpts||a;for(const[c,t]of e)r[c]=t;return r},na={},ra={class:"flex flex-col items-center justify-center py-16 gap-4"};function ca(a,e){return Q(),X("div",ra,[...e[0]||(e[0]=[g("div",{class:"relative w-10 h-10"},[g("div",{class:"absolute inset-0 rounded-full border-2 border-ink/5 dark:border-white/5"}),g("div",{class:"absolute inset-0 rounded-full border-2 border-transparent border-t-brand animate-spin-slow"})],-1),g("span",{class:"text-xs tracking-widest uppercase text-ink-muted dark:text-neutral-500"}," Loading ",-1)])])}const oa=sa(na,[["render",ca]]),ia="https://de1.api.radio-browser.info/json";function da(a,e){const r=new URL(`${ia}${a}`);if(e)for(const[c,t]of Object.entries(e))r.searchParams.set(c,t);return $fetch(r.toString())}function fa(a){return{id:a.stationuuid,name:a.name,streamUrl:a.url_resolved,favicon:a.favicon||null,country:a.country,countryCode:a.countrycode,tags:a.tags?a.tags.split(","):[],bitrate:a.bitrate,codec:a.codec,popularity:a.clickcount,isPlayable:!0}}function _a(a){return{code:a.iso_3166_1,name:a.name,count:a.stationcount}}function ma(a){return{slug:a.name,count:a.stationcount}}export{oa as _,_a as a,fa as b,ma as m,da as r,la as u};
