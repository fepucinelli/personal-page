import{z as f,a5 as S,m as l,q as F}from"./C_JkIOlk.js";const b=f("player",()=>{const a=l(null),i=l(!1),n=l(!1),r=l(1),s=l(null);{const o=localStorage.getItem("player-volume");o!==null&&(r.value=Number(o))}let e=null,t=null;function u(o){t=o}function y(){e||(e=new Audio,e.crossOrigin="anonymous",e.preload="none",e.volume=r.value,e.addEventListener("playing",()=>{i.value=!0,n.value=!1}),e.addEventListener("pause",()=>{i.value=!1}),e.addEventListener("waiting",()=>{n.value=!0}),e.addEventListener("canplay",()=>{n.value=!1}),e.addEventListener("error",()=>{s.value="Station unavailable",n.value=!1,i.value=!1,t==null||t()}))}async function p(o){var v;if(y(),((v=a.value)==null?void 0:v.id)===o.id){c();return}a.value=o,n.value=!0,s.value=null,e.src=o.streamUrl;try{await e.play()}catch{s.value="Unable to play station",n.value=!1,t==null||t()}}function c(){e&&(e.paused?e.play():e.pause())}function m(){e&&e.pause()}function g(o){r.value=o,e&&(e.volume=o),localStorage.setItem("player-volume",String(o))}return{currentStation:a,isPlaying:i,isLoading:n,volume:S(r),error:s,play:p,toggle:c,pause:m,setVolume:g,onError:u}}),d=[{id:"system-radio-8150",name:"Deep Electronic Vibes",streamUrl:"https://az1.sednastream.com/radio/8150/Live",country:"Albany",countryCode:"US",tags:["electronic","deep house"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""},{id:"system-disco-funk",name:"70s 80s Disco Funk ModernSoul Boogie",streamUrl:"https://discofunk.streamingmedia.it/usa",country:"Italy",countryCode:"IT",tags:["disco","funk","soul","boogie"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""}];function P(){const a=localStorage.getItem("favorites");if(a)try{return JSON.parse(a)}catch{return[]}return[]}const I=f("favorites",()=>{const a=l(P()),i=F(()=>[...d,...a.value]),n=e=>d.some(t=>t.id===e),r=e=>n(e)?!0:a.value.some(t=>t.id===e);function s(e){n(e.id)||(r(e.id)?a.value=a.value.filter(t=>t.id!==e.id):a.value.push(e),localStorage.setItem("favorites",JSON.stringify(a.value)))}return{stations:a,allFavorites:i,isSystemFavorite:n,isFavorite:r,toggleFavorite:s}});function h(){const a=b(),i=I();function n(t){a.play(t)}function r(t){i.toggleFavorite(t)}function s(t){var u;return((u=a.currentStation)==null?void 0:u.id)===t.id&&a.isPlaying}function e(t){return i.isFavorite(t.id)}return{playStation:n,toggleFavorite:r,isPlaying:s,isFavorite:e}}export{b as a,h as b,I as u};
