import{y as f,l as s,m as S}from"./5feOgYAS.js";const F=f("player",()=>{const a=s(null),o=s(!1),n=s(!1),r=s(Number(localStorage.getItem("player-volume")??1)),l=s(null);let e=null,t=null;function u(i){t=i}function y(){e||(e=new Audio,e.crossOrigin="anonymous",e.preload="none",e.volume=r.value,e.addEventListener("playing",()=>{o.value=!0,n.value=!1}),e.addEventListener("pause",()=>{o.value=!1}),e.addEventListener("waiting",()=>{n.value=!0}),e.addEventListener("canplay",()=>{n.value=!1}),e.addEventListener("error",()=>{l.value="Station unavailable",n.value=!1,o.value=!1,t==null||t()}))}async function p(i){var v;if(y(),((v=a.value)==null?void 0:v.id)===i.id){c();return}a.value=i,n.value=!0,l.value=null,e.src=i.streamUrl;try{await e.play()}catch{l.value="Unable to play station",n.value=!1,t==null||t()}}function c(){e&&(e.paused?e.play():e.pause())}function m(){e&&e.pause()}function g(i){r.value=i,e&&(e.volume=i),localStorage.setItem("player-volume",String(i))}return{currentStation:a,isPlaying:o,isLoading:n,volume:r,error:l,play:p,toggle:c,pause:m,setVolume:g,onError:u}}),d=[{id:"system-radio-8150",name:"Deep Electronic Vibes",streamUrl:"https://az1.sednastream.com/radio/8150/Live",country:"Albany",countryCode:"US",tags:["electronic","deep house"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""},{id:"system-disco-funk",name:"70s 80s Disco Funk ModernSoul Boogie",streamUrl:"https://discofunk.streamingmedia.it/usa",country:"Italy",countryCode:"IT",tags:["disco","funk","soul","boogie"],bitrate:128,codec:"MP3",popularity:0,isPlayable:!0,favicon:""}];function b(){const a=localStorage.getItem("favorites");if(a)try{return JSON.parse(a)}catch{return[]}return[]}const P=f("favorites",()=>{const a=s(b()),o=S(()=>[...d,...a.value]),n=e=>d.some(t=>t.id===e),r=e=>n(e)?!0:a.value.some(t=>t.id===e);function l(e){n(e.id)||(r(e.id)?a.value=a.value.filter(t=>t.id!==e.id):a.value.push(e),localStorage.setItem("favorites",JSON.stringify(a.value)))}return{stations:a,allFavorites:o,isSystemFavorite:n,isFavorite:r,toggleFavorite:l}});function L(){const a=F(),o=P();function n(t){a.play(t)}function r(t){o.toggleFavorite(t)}function l(t){var u;return((u=a.currentStation)==null?void 0:u.id)===t.id&&a.isPlaying}function e(t){return o.isFavorite(t.id)}return{playStation:n,toggleFavorite:r,isPlaying:l,isFavorite:e}}export{F as a,L as b,P as u};
