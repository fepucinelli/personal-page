import{aa as s}from"./DGQHAk9h.js";let e=null;const n=s("player",{state:()=>({currentStation:null,isPlaying:!1,isLoading:!1,volume:1,error:null}),getters:{audioElement(){return e}},actions:{init(){e||(e=new Audio,e.crossOrigin="anonymous",e.preload="none",e.volume=this.volume,e.addEventListener("playing",()=>{this.isPlaying=!0,this.isLoading=!1}),e.addEventListener("pause",()=>{this.isPlaying=!1}),e.addEventListener("waiting",()=>{this.isLoading=!0}),e.addEventListener("canplay",()=>{this.isLoading=!1}),e.addEventListener("error",()=>{this.error="Station unavailable",this.isLoading=!1,this.isPlaying=!1}))},async play(i){var t;if(this.init(),((t=this.currentStation)==null?void 0:t.id)===i.id){this.toggle();return}this.currentStation=i,this.isLoading=!0,this.error=null,e.src=i.streamUrl;try{await e.play()}catch{this.error="Unable to play station",this.isLoading=!1}},toggle(){e&&(e.paused?e.play():e.pause())},pause(){e&&e.pause()},setVolume(i){this.volume=i,e&&(e.volume=i)}}});export{n as u};
